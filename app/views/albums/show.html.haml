- creator = @album.creator
%section.clearfix.inner_body
  .pc.cm
    .p10
      %figure.profile_cover.card_profile_cover.img_fill.fl.w100.album_cover
        = image_tag @album.cover_image_url
        %hgroup.head_row.bs
          %h2.fl
            = @album.name
            %small
              = "- #{@album.decorate.private_text}"
              = link_to content_tag(:i, "", class: "fa fa-gear"), edit_card_path(@album) if policy(@album).edit?
          %p.fr.count.bs
            %i.fa.fa-group
            = sanitize "#{@album.followers.count} &nbsp;|&nbsp;"
            %i.fa.fa-picture-o
            = sanitize "#{@album.photos.count} &nbsp;|&nbsp;"
            %i.fa.fa-heart
            = sanitize "#{@album.total_likes} &nbsp;|&nbsp;"
            %i.fa.fa-eye
            = sanitize "#{@album.hit_count} &nbsp;|&nbsp;"
            %i.fa.fa-comment
            = sanitize "#{@album.total_comments}"
      .album_bar.fl.w100
        %aside.p20.fr.invite_btn
          = @album.decorate.invite_btn_links
        %aside.p20.para
          = @album.caption

    .upload_btn.ac.bs.fl.w100
      = link_to image_tag("upload_img_btn.png", alt: "upload Image"), new_card_photo_path(@album), class: "fl w100"
    #m-container.fl.w100.clearfix
      = render partial: "photo", collection: @photos
    %nav#page-nav
      = link_to "", next_batch_photos_card_path(page: 1)

      -# .loading_feed.feed_box.fl.w100.p10
      -#   = image_tag "preloader.png", class: "rotate", alt: "Loading ..."
      -#   %span
      -#     Loading
      -#     %blink ...

:javascript
  jQuery(function($) {
      var container = document.querySelector('#m-container');
      var msnry =  new Masonry( container, {
          itemSelector: '.feed_box'
      });
      $('.like_btn').click(function(){
          $(this).parents('.f_bottom').find('.like_box').fadeToggle(0,function(){
              msnry.layout();// this is masonry layout reset function we can user with other events
          });
          return false;
      });

      var $container = $('#m-container');
      $container.infinitescroll('bind');
      $container.infinitescroll({
        msgText: "<em>Loading the next set of posts...</em>",
        navSelector  : '#page-nav',    // selector for the paged navigation 
        nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
        itemSelector : '.feed_box',     // selector for all items you'll retrieve
        loading: {
            finishedMsg: 'No more pages to load.'
          }
        },
        // trigger Masonry as a callback
        function( newElements ) {
          var msnry =  new Masonry( container, {
              itemSelector: '.feed_box'
          });
          $(".img_fill").imgLiquid({ fill: true });
          $(".img_set").imgLiquid({ fill: false });
          var $newElems = $( newElements );
          $container.masonry( 'appended', newElements);
        }
      );
  });


